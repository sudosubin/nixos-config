diff --git a/src/state.ts b/src/state.ts
index 5e71184..66ab7b9 100644
--- a/src/state.ts
+++ b/src/state.ts
@@ -10,7 +10,9 @@ import {
 
 export const CURSOR_STATE_ENTRY_TYPE = "pi-cursor-provider:state";
 
-const CACHE_DIR = path.join(os.homedir(), ".pi", "agent", "cache", "pi-cursor-provider");
+const CACHE_DIR = process.env.PI_CODING_AGENT_DIR
+	? path.join(process.env.PI_CODING_AGENT_DIR, "cache", "pi-cursor-provider")
+	: path.join(os.homedir(), ".pi", "agent", "cache", "pi-cursor-provider");
 
 interface CursorConversationState {
 	conversationId: string;
