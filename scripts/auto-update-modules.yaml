modules:
  - path: ./libraries/nixpkgs/programs/cleanshot/default.nix
    args:
      read_from_file: ["url"]
      read_from_method: ["version"]
      write: ["version", "sha256"]
    methods:
      get_version: |-
        curl -sL "https://formulae.brew.sh/api/cask/cleanshot.json" | jq -r ".version"

  - path: ./libraries/nixpkgs/programs/clop/default.nix
    args:
      read_from_file: ["url"]
      read_from_method: ["version"]
      write: ["version", "sha256"]
    methods:
      get_version: |-
        curl -s "https://raw.githubusercontent.com/FuzzyIdeas/Clop/main/Clop.xcodeproj/project.pbxproj" \
          | grep "MARKETING_VERSION =" \
          | tail -n 1 \
          | sed -r "s/.*MARKETING_VERSION = (.*);/\1/g"

  - path: ./libraries/nixpkgs/programs/hammerspoon/default.nix
    args:
      read_from_file: ["url"]
      read_from_method: ["version"]
      write: ["version", "sha256"]
    methods:
      get_version: |-
        curl -s "https://api.github.com/repos/Hammerspoon/hammerspoon/releases/latest" | jq -r ".name"

  - path: ./libraries/nixpkgs/programs/homerow/default.nix
    args:
      read_from_file: ["url"]
      read_from_method: ["version"]
      write: ["version", "sha256"]
    methods:
      get_version: |-
        curl -s "https://install.appcenter.ms/api/v0.1/apps/dexterleng/homerow-redux/distribution_groups/production/public_releases" \
          | jq -r "first | .short_version"

  - path: ./libraries/nixpkgs/programs/orbstack/default.nix
    args:
      read_from_file: ["url"]
      read_from_method: ["version"]
      write: ["version", "sha256"]
    methods:
      get_version: |-
        curl -s "https://formulae.brew.sh/api/cask/orbstack.json" | jq -r ".version"

  - path: ./libraries/nixpkgs/programs/redisinsight/default.nix
    args:
      read_from_file: ["url"]
      read_from_method: ["version"]
      write: ["version", "sha256"]
    methods:
      get_version: |-
        curl -s "https://formulae.brew.sh/api/cask/redisinsight.json" | jq -r ".version"
